package mop;

import java.io.*;

/**
 * Prevents read() after close().
 */

Reader_ReadAfterClose(Reader r) {
	event read before(Reader r) : call(* Reader+.read(..)) && target(r) {}
	event close before(Reader r) : call(* Reader+.close(..)) && target(r) {}

	ere : read* close+

	@fail {
		System.err.println("read() was invoked after close(), or close() was invoked multiple times.");
		System.exit(1);
	}
}
